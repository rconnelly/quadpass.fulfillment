extends layout

block content
    .row
        .span3 &nbsp;
        .span6
            h1(style='padding-bottom:2em') Login

            form.form-horizontal.form-horizontal(action='/login', method='post', accept-charset='utf-8')
                input(type='hidden', name='_csrf', value=req.session._csrf)

                .control-group
                    label.control-label(for='username') Email
                    .controls
                        input.input-xlarge(id='username',name='username',type='text',required, pattern='')
                        p.help-block Enter a valid email address.

                .control-group
                    label.control-label(for='password') Password
                    .controls
                        input.input-xlarge(id='password',name='password',type='password', required)
                        p.help-block Must be at least 6 characters long.

                .form-actions.well
                    input.btn.btn-large.btn-primary(type='submit',value='Log in')
                    button.btn.btn-large(type='button', onclick='javascript:location="/register"') Register new account

                .control-group.well
                    label.control-label(for='facebook-btn') Connect with
                    .controls
                        button.btn.btn-large(id='facebook-btn', onclick='javascript:location="/auth/facebook"') Facebook
                        button.btn.btn-large(onclick='javascript:location="/auth/twitter"') Twitter
                        button.btn.btn-large(onclick='javascript:location="/auth/google"') Google+


    script(type='text/javascript', charset='utf-8')
        CLIENTAPP.onload.push(function() {

        // convert everyauth errors array to flash messages
        (function(errors) {

          if(errors.length) {
            for (var i=0; i < errors.length; i++) {
              flashMessage('error', errors[i], true);
            };
          }

        })(!{JSON.stringify(errors)});

        });


